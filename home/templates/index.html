{% extends "base.html" %} {% block content %} {% load static %} {% load i18n %}

    <!-- HOEM SECTION -->
    <!-- USER LOGE OUT -->
    {% if request.user.id == None %} 
        {% include "home/contents.html" %} 
    {% else %}
        {% include './home/contents-2.html' %} 
    {% endif %}
    <!-- END HOME SECTION -->
    {% load l10n %}
    
    {% get_current_language as lang %}
    {% if lang == "ar" %}
    <style>
        .image-owner{
            direction: ltr;
            float: left;
        }
        .full{
            direction: ltr;
            float: left;
        }
        .rating{
            direction: ltr;
            float: left;
        }
        .name{
            direction: ltr;
            float: left;
        }
        .accordion__menu{
            background-color: none !important;

        }
        .accordion__menu-dark{
            background-color: rgb(241, 241, 241) !important;
        }
    </style>
    {% endif %}

    <style>
        .in-blk {
            display: flex;
            flex-direction: row;
        }

        .goldstardiv {
            color: gold;
            position: relative;
        }

        .nocourseavailable {
            text-align: center;
            font-size: 30px;
            font-weight: bolder;
        }

        /****** Style Star Rating Widget *****/
        @import url(//netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css);

        .rating {
            border: none;
            float: left;
        }

        .rating > input {
            display: none;
        }

        .rating > label:before {
            margin: 5px;
            font-size: 1.25em;
            font-family: FontAwesome;
            display: inline-block;
            content: "\f005";
        }

        .rating > .half:before {
            content: "\f089";
            position: absolute;
        }

        .rating > label {
            color: #ddd;
            float: right;
        }

        /***** CSS Magic to Highlight Stars on Hover *****/
        .rating > input:checked ~ label
        {
            color: #FFD700;
        }

        .is-comboe{
            background-color: #fff;
        }

        .is-comboe-dark{
            background: #2e3a4d !important; 
            border: 1px solid #242f42 !important;
            color: #bfcddb !important;
        }

        .prcgr{
            color: rgb(25, 139, 82) !important;
        }

        .prcgr-dark{
            color: rgb(177, 241, 209) !important;
        }

        .prcg{
            color: rgb(204, 29, 29) !important;
        }

        .prcg-dark{
            color: rgb(214, 169, 169) !important;
        }
    </style>

    <style>

        @media (max-width: 624px) {
        .is-comboe-hide {

            display: none !important
            ;
        }
        .select-phone{
            margin-left: 20px !important;
        }
        .shop-header-phone{
            padding-right: 50px !important
            ;
        }
       }
       
       

.textt{
  color: rgb(50, 53, 58) !important;
}

.textt-dark{
  color: rgb(228, 229, 230) !important;
}

.change-text-selection::-moz-selection { /* Code for Firefox */
  color: rgb(130, 179, 219) !important;
}

.change-text-selection::selection {
  color: rgb(130, 179, 219) !important;
}

.close-modal{
    color:rgb(183, 193, 209) !important
}
.close-modal:hover{
    color:rgb(54, 64, 82) !important
}

    </style>


<div class="banner banner-dark" style="display: none;top: 0 !important;">
    <div class="container " style="">
        <div class="banner__content">
            {% if lang == "ar" %}
            <div class="banner__text" style="text-align: right;">
                <b id="banner_text" style="text-align: right;"></b>
            </div>
            {% else %}
            <div class="banner__text" style="text-align: left;">
                <b id="banner_text" style="text-align: left;"></b>
            </div>
            {% endif %}
            <button class="banner__close" type="button">
                <span class="material-icons">
                  <i class="fa fa-times"></i>
                </span>
            </button>
        </div>
    </div>
</div>

    <form method="post" id="index_form" action="" style="display:none;">
        {% csrf_token %}
        <input type="hidden" id="type" value="{{ type }}" name="type">
        <input type="hidden" id="page" value="{{ page }}" name="page">
        <input type="hidden" id="order" value="{{ order }}" name="order">
    </form>

    <!-- Filters and courses -->
    <div id="shop-page" class="shop-wrapper">
        <div class="products-navigation" style="display: none;"></div>
        <div class="shop-header shop-header-phone shop-header-is-dark ">
            <div class="container" style="display: flex; justify-content: space-between;">
                <div class="store-tabs">
                    <a class="tab-control {% if type == -1 %}is-active{% endif %}"
                       onclick="setType(-1)">{% trans 'All' %}</a>
                    <a class="tab-control {% if type == 0 %}is-active{% endif %}"
                       onclick="setType(0)">{% trans 'Paid' %}</a>
                    <a class="tab-control {% if type == 1 %}is-active{% endif %}"
                       onclick="setType(1)">{% trans 'Free' %}</a>
                    <div class="store-naver"></div>
                </div>
                <div class="combo-item is-combo-dark">
                    <div class="select is-comboe-hide is-rounded  ">
                        <select class="is-comboe  is-comboe-dark" style="border-radius:3px;height:40px;margin-top:2px;"
                                id="category_id_2">
                            {% get_current_language as lang %}
                            {% if lang == "ar" %}
                            <option value="0" {% if order == 0 %}selected{% endif %}>الكل</option>
                            <option value="1" {% if order == 1 %}selected{% endif %}>الأعلى تقييم</option>
                            <option value="2" {% if order == 2 %}selected{% endif %}>الأكثر مشاركة</option>
                            <option value="3" {% if order == 3 %}selected{% endif %}>الأحدث</option>
                            {% else %}
                            <option value="0" {% if order == 0 %}selected{% endif %}>All</option>
                            <option value="1" {% if order == 1 %}selected{% endif %}>Most Rating</option>
                            <option value="2" {% if order == 2 %}selected{% endif %}>Most Students</option>
                            <option value="3" {% if order == 3 %}selected{% endif %}>Newest</option>
                            {% endif %}
                        </select>
                    </div>
                    <div class="select select-phone is-rounded " >
                        <select class="is-comboe is-comboe-dark" id="category_id" data-select="{{ cat_id }}"
                                style="border-radius:3px;height:40px;margin-top:2px" onchange="category()">
                            {% get_current_language as lang %}
                            {% if lang == "ar" %}
                                <option value="0">الكل</option>
                                {% for i in category_obj %}
                                    <option value="{{ i.id }}">{{ i.namear }}</option>
                                {% endfor %}
                            {% else %}
                                <option value="0">All</option>
                                {% for i in category_obj %}
                                    <option value="{{ i.id }}">{{ i.name }}</option>
                                {% endfor %}
                            {% endif %}
                        </select>
                    </div>
                </div>
            </div>
        </div>
        <div class="store-sections ">
            <div class="container">
                <div id="products-tab" class="store-tab-pane is-active sortingdivparent" id="demo">
                    <div class="columns is-multiline sortingdiv allcoursearea">
                        {% for course in course_list %}
                            <div class="column is-one-fifth-fullhd is-one-quarter-widescreen is-one-third-desktop is-half-tablet is-full-mobile coursecard"
                                 data-cat-id="{{ course.scat_id }}" data-rating="{{ course.rating }}"
                                 data-ts="{{ course.student_num }}" data-cd="{{ course.created_at.timestamp }}">
                                <div class="product-card  product-card-dark" data-name="{{ course.name }}"
                                     data-price="44.00" data-colors="true" data-variants="true"
                                     data-path="{% static 'assets/img/products/1' %}">
                                        <div class="image-grid-wrap">
                                            <div class="image-grid">
                                                <div class="image-row">
                                                    <div class="flex-1 has-background-image show-image"
                                                         data-background="{% static course.cover_img %}"
                                                         data-demo-background="{% static 'assets/img/courses/pc.jpg' %}"
                                                         style="display: none;border-radius:0px">
                                                        <a href="course/{{ course.link }}">
                                                            <div class="overlay"></div>
                                                        </a>

                                                        <div class="image-owner">
                                                            <div class="name" style="display: flex; align-items: center;" style="font-size: 10px !important;">
                                                                <form class="rating" data-rating="{{ course.rating }}" data-course="{{ course.id }}">

                                                                    <input type="radio" id="star10-{{ course.id }}" name="rating" value="5" disabled />
                                                                    <label class="full" for="star10-{{ course.id }}" title="Awesome - 5 stars"></label>

                                                                    <input type="radio" id="star9-{{ course.id }}" name="rating" value="4 and a half" disabled/>
                                                                    <label class="half" for="star9-{{ course.id }}" title="Pretty good - 4.5 stars"></label>

                                                                    <input type="radio" id="star8-{{ course.id }}" name="rating" value="4" disabled/>
                                                                    <label class="full" for="star8-{{ course.id }}" title="Pretty good - 4 stars"></label>

                                                                    <input type="radio" id="star7-{{ course.id }}" name="rating" value="3 and a half" disabled/>
                                                                    <label class="half" for="star7-{{ course.id }}" title="Meh - 3.5 stars"></label>

                                                                    <input type="radio" id="star6-{{ course.id }}" name="rating" value="3" disabled/>
                                                                    <label class="full" for="star6-{{ course.id }}" title="Meh - 3 stars"></label>

                                                                    <input type="radio" id="star5-{{ course.id }}" name="rating" value="2 and a half" disabled/>
                                                                    <label class="half" for="star5-{{ course.id }}" title="Kinda bad - 2.5 stars"></label>

                                                                    <input type="radio" id="star4-{{ course.id }}" name="rating" value="2" disabled/>
                                                                    <label class="full" for="star4-{{ course.id }}" title="Kinda bad - 2 stars"></label>

                                                                    <input type="radio" id="star3-{{ course.id }}" name="rating" value="1 and a half" disabled/>
                                                                    <label class="half" for="star3-{{ course.id }}" title="Meh - 1.5 stars"></label>

                                                                    <input type="radio" id="star2-{{ course.id }}" name="rating" value="1" disabled/>
                                                                    <label class="full" for="star2-{{ course.id }}" title="Sucks big time - 1 star"></label>

                                                                    <input type="radio" id="star1-{{ course.id }}" name="rating" value="half" disabled/>
                                                                    <label class="half" for="star1-{{ course.id }}" title="Sucks big time - 0.5 stars"></label>

                                                                </form>
                                                                <span style="font-size: small; color: rgb(255, 238, 80); cursor: default;">{{ course.rating|unlocalize }} &nbsp; ( {{ course.count }} )</span>
                                                            </div>
                                                        </div>

                                                        {% if course.price > 0 %}
                                                            {% if user.is_authenticated %}
                                                                {% if course.id in alreadyinFav %}
                                                                    <div class="photo-like pop-button has-tooltip is-shifted is-active favbutton"
                                                                         id="invite-pop" data-id="{{ course.id }}">
                                                                        <a class="inner"
                                                                           data-title="Relationship"
                                                                           data-type="addFav" data-id="">
                                                                            <svg xmlns="http://www.w3.org/2000/svg"
                                                                                 xmlns:xlink="http://www.w3.org/1999/xlink"
                                                                                 aria-hidden="true" focusable="false"
                                                                                 width="1em"
                                                                                 height="1em"
                                                                                 style="-ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); transform: rotate(360deg);"
                                                                                 preserveAspectRatio="xMidYMid meet"
                                                                                 viewBox="0 0 24 24">
                                                                                <g fill="red" stroke="red"
                                                                                   stroke-width="2"
                                                                                   stroke-linecap="round"
                                                                                   stroke-linejoin="round">
                                                                                    <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78l1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
                                                                                </g>
                                                                            </svg>
                                                                        </a>
                                                                    </div>
                                                                {% else %}
                                                                    <div class="photo-like pop-button has-tooltip favbutton"
                                                                         id="invite-pop" data-id="{{ course.id }}">
                                                                        <a class="inner"
                                                                           data-title="Relationship"
                                                                           data-type="addFav" data-id="">
                                                                            <svg xmlns="http://www.w3.org/2000/svg"
                                                                                 xmlns:xlink="http://www.w3.org/1999/xlink"
                                                                                 aria-hidden="true" focusable="false"
                                                                                 width="1em"
                                                                                 height="1em"
                                                                                 style="-ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); transform: rotate(360deg);"
                                                                                 preserveAspectRatio="xMidYMid meet"
                                                                                 viewBox="0 0 24 24">
                                                                                <g fill="none" stroke="#626262"
                                                                                   stroke-width="2"
                                                                                   stroke-linecap="round"
                                                                                   stroke-linejoin="round">
                                                                                    <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78l1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
                                                                                </g>
                                                                            </svg>
                                                                        </a>
                                                                    </div>
                                                                {% endif %}
                                                                {% if course.user_id != user.id %}
                                                                    {% if course.id in alreadyinCart %}
                                                                        <a id="follow-pop"
                                                                        class="photo-time pop-button has-tooltip is-shifted is-active"
                                                                        data-title="Relationship" data-id="{{ course.id }}">
                                                                            <i class="fa fa-shopping-cart"
                                                                            style=";font-size: 22px;color: skyblue"></i>
                                                                        </a>
                                                                    {% else %}
                                                                        <a id="follow-pop"
                                                                        class="photo-time pop-button has-tooltip"
                                                                        data-title="Relationship" data-id="{{ course.id }}">
                                                                            <i class="fa fa-shopping-cart"
                                                                            style="font-size: 22px;color: #fff;"></i>
                                                                        </a>
                                                                    {% endif %}
                                                                {% endif %}
                                                            {% endif %}
                                                        {% else %}
                                                            {% if user.is_authenticated %}
                                                                {% if course.id in alreadyinFav %}
                                                                    <div class="photo-like pop-button has-tooltip is-shifted is-active favbutton"
                                                                         id="invite-pop" data-id="{{ course.id }}">
                                                                        <a class="inner"
                                                                           data-title="Relationship"
                                                                           data-type="addFav" data-id="">
                                                                            <svg xmlns="http://www.w3.org/2000/svg"
                                                                                 xmlns:xlink="http://www.w3.org/1999/xlink"
                                                                                 aria-hidden="true" focusable="false"
                                                                                 width="1em"
                                                                                 height="1em"
                                                                                 style="-ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); transform: rotate(360deg);"
                                                                                 preserveAspectRatio="xMidYMid meet"
                                                                                 viewBox="0 0 24 24">
                                                                                <g fill="red" stroke="red"
                                                                                   stroke-width="2"
                                                                                   stroke-linecap="round"
                                                                                   stroke-linejoin="round">
                                                                                    <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78l1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
                                                                                </g>
                                                                            </svg>
                                                                        </a>
                                                                    </div>
                                                                {% else %}
                                                                    <div class="photo-like pop-button has-tooltip favbutton"
                                                                         id="invite-pop" data-id="{{ course.id }}">
                                                                        <a class="inner"
                                                                           data-title="Relationship"
                                                                           data-type="addFav" data-id="">
                                                                            <svg xmlns="http://www.w3.org/2000/svg"
                                                                                 xmlns:xlink="http://www.w3.org/1999/xlink"
                                                                                 aria-hidden="true" focusable="false"
                                                                                 width="1em"
                                                                                 height="1em"
                                                                                 style="-ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); transform: rotate(360deg);"
                                                                                 preserveAspectRatio="xMidYMid meet"
                                                                                 viewBox="0 0 24 24">
                                                                                <g fill="none" stroke="#626262"
                                                                                   stroke-width="2"
                                                                                   stroke-linecap="round"
                                                                                   stroke-linejoin="round">
                                                                                    <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78l1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
                                                                                </g>
                                                                            </svg>
                                                                        </a>
                                                                    </div>
                                                                {% endif %}
                                                            {% endif %}
                                                        {% endif %}
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </a>
                                    <div class="product-skeleton">
                                        <div class="pd_title loading"></div>
                                        <div class="pd_description">
                                            <div class="pd_description1 loading"></div>
                                            <div class="pd_description2 loading"></div>
                                        </div>
                                        <div class="pd_review" style="display: flex;">
                                            <div class="pd_users loading"></div>
                                            <div class="pd_videos loading"></div>
                                        </div>
                                        <div class="pd_footer" style="display: flex;">
                                            <div class="pd_price loading"></div>
                                            <div class="pd_button loading"></div>
                                        </div>
                                    </div>
                                    <div class="product-info">
                                        <h3>
                                            <a href="# "
                                               style="display: block; width: 230px; overflow: hidden; white-space: nowrap; text-overflow: ellipsis; ">{{ course.name }}</a>
                                        </h3>
                                        <p class="textt textt-dark" style="line-height: 1.5em; height: 3em; overflow: hidden; text-overflow: ellipsis;">{{ course.description | safe | truncatechars:30 }}</p>
                                        <i class="fa fa-users "></i>
                                        <span style="font-size: small; ">{{ course.student_num }}</span>
                                        <i class="fa fa-video "></i>
                                        <span style="font-size: small; ">{{ course.video }} Videos</span>
                                        
                                        <!-- heree -->
                                        {% if course.booctep_choice %}
                                            <img src="{% static 'assets/img/check-mark.png' %}" alt="Booctep's choice"
                                                 style="width:25px;height:25px;position:absolute;right:23px" class="check-mark" />
                                                
                                        {% endif %}
                                        <div class="product-actions">
                                            <div class="left">
                                                {% if course.price > 0 %}
                                                    {% if course.price != course.discount_price %}
                                                      {% get_current_language as lang %}
                                                      {% if lang == "ar" %}
                                                        <b class="prcg prcg-dark">
                                                            <del style="font-weight: bold" class="prcg prcg-dark"> {{ course.price|unlocalize }} <b>ريال</b> </del><br>   
                                                            <b class="prcgr prcgr-dark"> {{ course.discount_price|unlocalize }} ريال </b>
                                                        </b>
                                                      {% else %}
                                                      <b class="prcg prcg-dark">
                                                          <del style="font-weight: bold" class="prcg prcg-dark">SR {{ course.price|floatformat:'2' }}</del> <br>  
                                                          <b class="prcgr prcgr-dark">SR {{ course.discount_price|floatformat:'2' }}</b>
                                                      </b>
                                                      {% endif %}
                                                    {% else %}
                                                    {% get_current_language as lang %}
                                                    {% if lang == "ar" %}
                                                    <b class="prcg prcg-dark"> {{ course.price|unlocalize }} ريال</b>
                                                    {% else %}
                                                    <b class="prcg prcg-dark">SR {{ course.price }}</b>
                                                    {% endif %}

                                                    {% endif %}
                                                {% else %}
                                                    {% get_current_language as lang %}
                                                    {% if lang == "ar" %}
                                                    <b class="prcgr prcgr-dark"> مجانا </b>
                                                    {% else %}
                                                    <b class="prcgr prcgr-dark"> Free </b>
                                                    {% endif %}
                                                {% endif %}
                                            </div>
                                            <div class="right ">
                                                <a class="button primary-button is-solid raised story modal-trigger promo"
                                                   data-modal="videos-modal" onclick="showVideoModal(this)"
                                                   data-id="{{ course.id }}">
                                                    <i class="fa fa-play"></i> {% trans 'Demo' %}
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                    <center>
                        {% if course_list.has_other_pages %}
                            <ul class="pagination">
                                {% if course_list.number != 1 %}
                                <li class="active" style="background: #0d79df; color: white; cursor: pointer;"
                                    onclick="page_set({{ 1 }})"><span style="font-size:18px;">First</span>
                                </li>
                                {% endif %}
                                {% if course_list.has_previous %}
                                    <li><a onclick="page_prev()">
                                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                                    </a></li>
                                {% else %}
                                    <li class="disabled">
                                        <i class="fa fa-angle-left" aria-hidden="true"></i></li>
                                {% endif %}
                                {% if course_list.number > 2 %}
                                    <li style="cursor: pointer;">
                                        <span>...</span>
                                    </li>
                                {% endif %}
                                {% if course_list.number > 1 %}
                                    <li style="cursor: pointer;" onclick="page_set({{ course_list.number|add:"-1" }})">
                                        <span>{{ course_list.number|add:"-1" }}</span>
                                    </li>
                                {% endif %}
                                <li class="active" style="background: #0d79df; color: white; cursor: pointer;" onclick="page_set({{ course_list.number }})">
                                    <span>{{ course_list.number }}</span>
                                </li>
                                {% if course_list.number < course_list.paginator.num_pages %}
                                    <li style="cursor: pointer;" onclick="page_set({{ course_list.number|add:"1" }})">
                                        <span>{{ course_list.number|add:"1" }}</span>
                                    </li>
                                {% endif %}
                                {% if course_list.number < course_list.paginator.num_pages|add:"-1" %}
                                    <li style="cursor: pointer;">
                                        <span>...</span>
                                    </li>
                                {% endif %}
                                {% if course_list.has_next %}
                                    <li><a onclick="page_next()">
                                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                                    </a></li>
                                {% else %}
                                    <li class="disabled">
                                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                                    </li>
                                {% endif %}
                                {% if course_list.number != course_list.paginator.num_pages %}
                                <li style="background: #0d79df; color: white; cursor: pointer;"
                                    onclick="page_set({{ course_list.paginator.num_pages }})"><span style="font-size:18px;">Last</span>
                                </li>
                                {% endif %}
                            </ul>
                        {% endif %}
                    </center>
                </div>
            </div>
        </div>
    </div>
    <!-- Filters and courses -->

    <div id="parent" style="display: none"></div>

    <!-- More categories start -->
    <div class="categories-bg categories-dark-bg">
        <div class="container ">
            <div class="columns ">
                <div class="column ">
                    <div class="categories-header categories-dark-header ">
                        <h2>{% trans 'Categories' %}</h2>
                    </div>
                    <div class="tile is-ancestor ">
                        <div class="tile is-parent is-vertical ">
                            <a href="/{{ lang }}/category/{{category_obj.0.urlname}}/{{category_obj.0.id}}" class="tile is-child category-box category-dark-box is-accent ">
                                <img src="{% static 'assets/img/categories/pythhon.svg' %} " alt=" ">
                                <div class="box-content ">
                                    {% get_current_language as lang %}
                                    {% if lang == "ar" %}
                                    <h3 class="title is-6 change-text-selection"> بايثون</h3>
                                    {% else %}
                                    <h3 class="title is-6 change-text-selection"> Python</h3>
                                    {% endif %}
                                </div>
                            </a>
                            <a href="/{{ lang }}/category/{{category_obj.1.urlname}}/{{category_obj.1.id}}" class="tile is-child category-box category-dark-box is-accent ">
                                <img src="{% static 'assets/img/categories/ai.svg' %} " alt=" ">
                                <div class="box-content ">
                                    {% get_current_language as lang %}
                                    {% if lang == "ar" %}
                                    <h3 class="title is-6 change-text-selection"> الذكاء الإصطناعي</h3>
                                    {% else %}
                                    <h3 class="title is-6 change-text-selection"> Artificial intelligence</h3>
                                    {% endif %}
                                </div>
                            </a>
                        </div>
                        <div class="tile is-vertical is-8 ">
                            <div class="tile ">
                                <div class="tile is-parent is-vertical ">
                                    <a href="/{{ lang }}/category/{{category_obj.2.urlname}}/{{category_obj.2.id}}"
                                       class="tile is-child category-box category-dark-box is-accent ">
                                        <img src="{% static 'assets/img/categories/dataa.svg' %} " alt=" ">
                                        <div class="box-content ">
                                            {% get_current_language as lang %}
                                            {% if lang == "ar" %}
                                            <h3 class="title is-6 change-text-selection">علوم البيانات</h3>
                                            {% else %}
                                            <h3 class="title is-6 change-text-selection">Data Science</h3>
                                            {% endif %}    
                                        </div>
                                    </a>
                                    <a href="/{{ lang }}/category/{{category_obj.3.urlname}}/{{category_obj.3.id}}"
                                       class="tile is-child category-box category-dark-box is-primary ">
                                        <img src="{% static 'assets/img/categories/cyber_s.svg' %} " alt=" ">
                                        <div class="box-content ">
                                            {% get_current_language as lang %}
                                            {% if lang == "ar" %}
                                            <h3 class="title is-6 "> الأمن السيبراني</h3>
                                            {% else %}
                                            <h3 class="title is-6 "> Cyber security</h3>
                                            {% endif %}
                                        </div>
                                    </a>
                                </div>
                                <div class="tile is-parent is-vertical ">
                                    <a href="/{{ lang }}/category/{{category_obj.4.urlname}}/{{category_obj.4.id}}"
                                       class="tile is-child category-box category-dark-box is-primary is-taller ">
                                        <img src="{% static 'assets/img/categories/business.svg' %} " alt=" ">
                                        <div class="box-content ">
                                            {% get_current_language as lang %}
                                            {% if lang == "ar" %}
                                            <h3 class="title is-6 ">إدارة الأعمال</h3>
                                            {% else %}
                                            <h3 class="title is-6 ">Business</h3>
                                            {% endif %}
                                        </div>
                                    </a>

                                    <a href="/{{ lang }}/category/{{category_obj.5.urlname}}/{{category_obj.5.id}}"
                                       class="tile is-child category-box category-dark-box is-accent is-taller ">
                                        <img src="{% static 'assets/img/categories/android.svg' %} " alt=" ">
                                        <div class="box-content ">
                                            {% get_current_language as lang %}
                                            {% if lang == "ar" %}
                                            <h3 class="title is-6 change-text-selection"> تطبيقات الأندرويد</h3>
                                            {% else %}
                                            <h3 class="title is-6 change-text-selection"> Android Apps</h3>
                                            {% endif %}
                                        </div>
                                    </a>
                                </div>
                            </div>
                            <div class="tile is-parent ">
                                <a href="/{{ lang }}/category/{{category_obj.6.urlname}}/{{category_obj.6.id}}"
                                   class="tile is-child category-box category-dark-box is-accent is-row ">
                                    <img src="{% static 'assets/img/categories/ios.svg' %} " alt=" ">
                                    <div class="box-content ">
                                        {% get_current_language as lang %}
                                        {% if lang == "ar" %}
                                        <h3 class="title is-6 change-text-selection">تطبيقات الأي أو اس</h3>
                                        {% else %}
                                        <h3 class="title is-6 change-text-selection">ios Apps</h3>
                                        {% endif %}
                                    </div>
                                </a>
                            </div>
                        </div>
                    </div>
                    <div class="tile is-ancestor ">
                        <div class="tile is-parent is-vertical ">
                            <a href="/{{ lang }}/category/{{category_obj.7.urlname}}/{{category_obj.7.id}}"
                               class="tile is-child category-box category-dark-box is-accent is-taller ">
                                <img src="{% static 'assets/img/categories/hypered.svg' %} " alt=" ">
                                <div class="box-content ">
                                    {% get_current_language as lang %}
                                    {% if lang == "ar" %}
                                    <h3 class="title is-6 change-text-selection">تطبيقات هايبرد </h3>
                                    {% else %}
                                    <h3 class="title is-6 change-text-selection">Hybrid Apps</h3>
                                    {% endif %}
                                </div>
                            </a>
                            <a href="/{{ lang }}/category/{{category_obj.8.urlname}}/{{category_obj.8.id}}"
                               class="tile is-child category-box category-dark-box is-primary is-taller ">
                                <img src="{% static 'assets/img/categories/p-language.svg' %} " alt=" ">
                                <div class="box-content ">
                                    {% get_current_language as lang %}
                                    {% if lang == "ar" %}
                                    <h3 class="title is-6 ">تصميم مواقع</h3>
                                    {% else %}
                                    <h3 class="title is-6 ">Web design</h3>
                                    {% endif %}
                                </div>
                            </a>
                        </div>
                        <div class="tile is-vertical is-8 ">
                            <div class="tile ">
                                <div class="tile is-parent is-vertical ">
                                    <a href="/{{ lang }}/category/{{category_obj.9.urlname}}/{{category_obj.9.id}}"
                                       class="tile is-child category-box category-dark-box is-primary ">
                                        <img src="{% static 'assets/img/categories/backend.svg' %} " alt=" ">
                                        <div class="box-content ">
                                            {% get_current_language as lang %}
                                            {% if lang == "ar" %}
                                            <h3 class="title is-6 ">برمجة مواقع</h3>
                                            {% else %}
                                            <h3 class="title is-6 ">Web development</h3>
                                            {% endif %}
                                        </div>
                                    </a>
                                    <a href="/{{ lang }}/category/{{category_obj.10.urlname}}/{{ category_obj.10.id }}"
                                       class="tile is-child category-box category-dark-box is-accent ">
                                        <img src="{% static 'assets/img/categories/design.svg' %} " alt=" ">
                                        <div class="box-content ">
                                            {% get_current_language as lang %}
                                            {% if lang == "ar" %}
                                            <h3 class="title is-6 change-text-selection">تصميم</h3>
                                            {% else %}
                                            <h3 class="title is-6 change-text-selection">Design</h3>
                                            {% endif %}
                                        </div>
                                    </a>
                                </div>
                                <div class="tile is-parent is-vertical ">
                                    <a href="/{{ lang }}/category/{{category_obj.11.urlname}}/{{category_obj.11.id}}"
                                       class="tile is-child category-box category-dark-box is-accent ">
                                        <img src="{% static 'assets/img/categories/qias.svg' %} " alt=" ">
                                        <div class="box-content ">
                                            {% get_current_language as lang %}
                                            {% if lang == "ar" %}
                                            <h3 class="title is-6 change-text-selection">قياس وقدرات</h3>
                                            {% else %}
                                            <h3 class="title is-6 change-text-selection">Qias</h3>
                                            {% endif %}
                                        </div>
                                    </a>
                                    <a href="/{{ lang }}/category/{{category_obj.12.urlname}}/{{ category_obj.12.id }}"
                                       class="tile is-child category-box category-dark-box is-primary ">
                                        <img src="{% static 'assets/img/categories/laguage.svg' %} " alt=" ">
                                        <div class="box-content ">
                                            {% get_current_language as lang %}
                                            {% if lang == "ar" %}
                                            <h3 class="title is-6 ">لغات </h3>
                                            {% else %}
                                            <h3 class="title is-6 ">Languages</h3>
                                            {% endif %}
                                        </div>
                                    </a>
                                </div>
                            </div>
                            <div class="tile is-parent ">
                                <a href="/{{ lang }}/category/{{category_obj.13.urlname}}/{{ category_obj.13.id }}"
                                   class="tile is-child category-box category-dark-box is-accent is-row ">
                                    <img src="{% static 'assets/img/categories/businees.svg' %} " alt=" ">
                                    <div class="box-content ">
                                        {% get_current_language as lang %}
                                        {% if lang == "ar" %}
                                        <h3 class="title is-6 change-text-selection">تطوير الذات</h3>
                                        {% else %}
                                        <h3 class="title is-6 change-text-selection">Self development</h3>
                                        {% endif %}
                                    </div>
                                </a>
                            </div>
                        </div>
                    </div>
                    <div class="tile is-ancestor ">
                        <div class="tile is-parent is-vertical ">
                            <a href="/{{ lang }}/category/{{category_obj.14.urlname}}/{{category_obj.14.id}}"
                               class="tile is-child category-box category-dark-box is-accent is-taller ">
                                <img src="{% static 'assets/img/categories/more.svg' %} " alt=" ">
                                <div class="box-content ">
                                    {% get_current_language as lang %}
                                    {% if lang == "ar" %}
                                    <h3 class="title is-6 change-text-selection">أخرى</h3>
                                    {% else %}
                                    <h3 class="title is-6 change-text-selection">Others</h3>
                                    {% endif %}
                                </div>
                            </a>
                            <a
                               class="tile is-child category-box category-dark-box is-primary is-taller "style="cursor:not-allowed">
                                <img src="{% static 'assets/img/categories/Engineer.svg' %} " alt=" " >
                                <div class="box-content ">

                                    {% get_current_language as lang %}
                                    {% if lang == "ar" %}
                                    <h3 class="title is-6 ">هندسة ( قريبا )</h3>
                                    {% else %}
                                    <h3 class="title is-6 ">Engineering ( soon )</h3>
                                    {% endif %}
                                                                
                                </div>
                            </a>
                        </div>
                        <div class="tile is-vertical is-8 ">
                            <div class="tile ">
                                <div class="tile is-parent is-vertical ">
                                    <a
                                       class="tile is-child category-box category-dark-box is-primary "style="cursor:not-allowed">
                                        <img src="{% static 'assets/img/categories/repare.svg' %} " alt=" ">
                                        <div class="box-content ">
                                            {% get_current_language as lang %}
                                            {% if lang == "ar" %}
                                            <h3 class="title is-6 change-text-selection">الصيانة والإصلاح ( قريبا )</h3>
                                            {% else %}
                                            <h3 class="title is-6 change-text-selection">Maintenance and Repair ( soon )</h3>
                                            {% endif %}
                                        </div>
                                    </a>
                                    <a
                                       class="tile is-child category-box category-dark-box is-accent "style="cursor:not-allowed">
                                        <img src="{% static 'assets/img/categories/food.svg' %} " alt=" ">
                                        <div class="box-content ">
                                            {% get_current_language as lang %}
                                            {% if lang == "ar" %}
                                            <h3 class="title is-6 change-text-selection">طبخ ( قريبا )</h3>
                                            {% else %}
                                            <h3 class="title is-6 change-text-selection">Cooking ( soon )</h3>
                                            {% endif %}
                                        </div>
                                    </a>
                                </div>
                                <div class="tile is-parent is-vertical ">
                                    <a
                                       class="tile is-child category-box category-dark-box is-accent "style="cursor:not-allowed">
                                        <img src="{% static 'assets/img/categories/sewiing.svg' %} " alt=" ">
                                        <div class="box-content ">
                                            {% get_current_language as lang %}
                                            {% if lang == "ar" %}
                                            <h3 class="title is-6 change-text-selection">الخياطة ( قريبا )</h3>
                                            {% else %}
                                            <h3 class="title is-6 change-text-selection">Sweing ( soon )</h3>
                                            {% endif %}
                                        </div>
                                    </a>
                                    <a
                                       class="tile is-child category-box category-dark-box is-primary "style="cursor:not-allowed">
                                        <img src="{% static 'assets/img/categories/artt.svg' %} " alt=" ">
                                        <div class="box-content ">
                                            {% get_current_language as lang %}
                                            {% if lang == "ar" %}
                                            <h3 class="title is-6 ">رسم ( قريبا )</h3>
                                            {% else %}
                                            <h3 class="title is-6 ">Art ( soon )</h3>
                                            {% endif %}
                                        </div>
                                    </a>
                                </div>
                            </div>
                            <div class="tile is-parent ">
                                <a
                                   class="tile is-child category-box category-dark-box is-accent is-row "style="cursor:not-allowed">
                                    <img src="{% static 'assets/img/categories/dramaa.svg' %} " alt=" ">
                                    <div class="box-content ">
                                        {% get_current_language as lang %}
                                        {% if lang == "ar" %}
                                        <h3 class="title is-6 change-text-selection">تصوير وإخراج ( قريبا )</h3>
                                        {% else %}
                                        <h3 class="title is-6 change-text-selection">Photography & direction ( soon )</h3>
                                        {% endif %}
                                    </div>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- More categories End -->

    <div id="videos-modal" class="modal videos-modal is-large has-light-bg">
        <div class="modal-background"></div>
        <div class="modal-content" style="height: auto !important;">
            <div class="card">
                <div class="card-heading">
                    <div class="user-meta">
                        <img class="avatar brd brd-dark" src="{% static 'assets/img/userdefault.png' %}" style="" data-demo-src="" id="modal-img">
                    </div>
                    <span class="user-meta-span ml-3"
                          id="modal-user-name">{{ course.user.first_name }}{{ course.user.last_name }} </span>
                    <span class="user-meta-span"
                          id="modal-course-name">&nbsp; &nbsp; |   {{ course.name }}&nbsp; &nbsp;</span>
                         
                    <!-- Close X button -->
                    <div class="close-wrap" >
                        <span class="close-modal" onclick="closeModal()" style="">
                            <i class="fa fa-times"></i>
                        </span>
                    </div>
                </div>
                <div class="card-body">
                    <div class="video-promo">
                        <video autoplay poster="/static/assets/img/setting.png" class="video-promo" style="max-height:450px !important" id="videoplayer" playsinline controls>
                            <source id="modal-video-src" src="{{ course.video.promo }}" type="video/mp4"/>
                            <track kind="captions" label="English captions" src="/path/to/captions.vtt" srclang="en" default/>
                        </video>
                    </div>
                </div>
            </div>
        </div>
    </div>

{% endblock %}
{% block script %}
    <script>
        let host_url = "{{host_url}}"
        let cur_page = '{{ page }}'

        function page_set(page) {
            $("#page").val(page)
            $("#index_form").submit()
        }

        function page_prev() {
            page = cur_page * 1 - 1
            $("#page").val(page)
            $("#index_form").submit()
        }

        function page_next() {
            page = cur_page * 1 + 1
            $("#page").val(page)
            $("#index_form").submit()
        }

        $("#category_id_2").on('change', function(){
            $("#order").val($(this).val())
            $("#index_form").submit()
        })

        function showVideoModal(obj) {
            id = $(obj).data('id')
            video_url = $(obj).data('url')
            let url = `/get_course_detail_by_id/`
            let form_data = new FormData()
            form_data.append('id', id)
            $.ajax({
                url: url,
                type: 'POST',
                dataType: 'json',
                async: false,
                contentType: false,
                processData: false,
                data: form_data,
            }).then((response) => {
                $("#modal-user-name").html(response.user_name)
                course = JSON.parse(response.course)
                sections = JSON.parse(response.sections)
                {% comment %} console.log("test::", course)
                console.log("sections::", sections) {% endcomment %}
                $("#modal-course-name").html(course[0].fields.name)
                $("#modal-users").html(response.user_count)
                $("#modal-rating").html(response.rating)
                $("#modal-img").attr('src', '/static' + response.user_img)
                html = ``;
                key = 0
                eleKey = 0
                sections.forEach(item =>{
                    item.video_list.forEach(ele =>{
                        if (eleKey == 0 && ele.lock == 0) {
                            if (ele.vimeo_url === "") {    
                                $("#modal-video-src").attr('src', host_url + "/static" + ele.url)
                                $("#modal-video-src").parent()[0].load()    
                            } else {
                                $("#videoplayer").css('display', 'none')
                                $("div.video-promo").append(ele.vimeo_url)
                            }
                        }
                        videoname = ele.name.slice(0, -4)
                        icon_name = `fa fa-lock`
                        if (ele.lock == 0)
                            icon_name = `fa fa-video`
                        if (ele.lock == 0 && eleKey == 0) {
                            icon_name = `fa fa-play`
                            eleKey ++
                        }
                    })
                    key ++
                })
            })
        }

        function closeModal() {
            var iframe = document.getElementsByTagName("iframe")[0];
            if (iframe) {
                iframe.remove();
                $("#videoplayer").css('display', 'block')
            } else {
                $(".video-promo #videoplayer")[0].pause()    
            }
        }

        function setType(type) {
            $("#type").val(type)
            $("#index_form").submit()
        }

        function category() {
            var category_id = $("#category_id").val();
            var category_id_2 = $("#category_id_2").val();
            $('#loadings').show();
            if (!category_id) {
                category_id = 0
            }
            if (!category_id_2) {
                category_id_2 = 0
            }
            if (category_id_2 == 1) { // Most rated
                $('.paidcoursearea .coursecard').sort(function (a, b) {
                    return $(b).data('rating') - $(a).data('rating');
                }).appendTo('.paidcoursearea');
                $('.freecoursearea .coursecard').sort(function (a, b) {
                    return $(b).data('rating') - $(a).data('rating');
                }).appendTo('.freecoursearea');
                $('.allcoursearea .coursecard').sort(function (a, b) {
                    return $(b).data('rating') - $(a).data('rating');
                }).appendTo('.allcoursearea');
            }
            if (category_id_2 == 2) {  // Most students
                $('.paidcoursearea .coursecard').sort(function (a, b) {
                    return $(b).data('ts') - $(a).data('ts');
                }).appendTo('.paidcoursearea');
                $('.freecoursearea .coursecard').sort(function (a, b) {
                    return $(b).data('ts') - $(a).data('ts');
                }).appendTo('.freecoursearea');
                $('.allcoursearea .coursecard').sort(function (a, b) {
                    return $(b).data('ts') - $(a).data('ts');
                }).appendTo('.allcoursearea');
            }
            if (category_id_2 == 3) {  // Newest
                $('.paidcoursearea .coursecard').sort(function (a, b) {
                    return $(b).data('cd') - $(a).data('cd');
                }).appendTo('.paidcoursearea');
                $('.freecoursearea .coursecard').sort(function (a, b) {
                    return $(b).data('cd') - $(a).data('cd');
                }).appendTo('.freecoursearea');
                $('.allcoursearea .coursecard').sort(function (a, b) {
                    return $(b).data('cd') - $(a).data('cd');
                }).appendTo('.allcoursearea');
            }
            if (category_id == 0) {
                $(".coursecard").show();
            } else {
                $(".coursecard").hide();
                $(".coursecard[data-cat-id=" + category_id + "]").show();
                $('#loadings').hide();
                if ($(".coursecard[data-cat-id=" + category_id + "]").length == 0) {
                    swal({
                        title: "Sorry, there are no course in this category ",
                        icon: "warning",
                        button: "Ok",
                        closeOnClickOutside: false,
                    })
                }
            }
        }

        {#category();#}

        var myTimer = setInterval(Dataloading, 2000);

        function Dataloading() {
            $(".skeleton").hide();
            $(".show-image ").delay(200).fadeIn(650);
            $(".product-skeleton").hide();
            $(".product-info ").delay(200).fadeIn(650);
        }

        $(document).ready(function () {

            $(".rating").each(function() {
                rating = $(this).data('rating')
                if (typeof rating === "string") {
                    rating = rating.replace(",",".")
                    rating = parseFloat(rating)
                }
                rating = rating * 1.0
                course = $(this).data('course')
                num = Math.floor(rating / 0.5)
                $(`#star${num}-${course}`).attr('checked', true)
            })

            const controls = [
                'restart', // Restart playback
                'rewind', // Rewind by the seek time (default 10 seconds)
                'play', // Play/pause playback
                'fast-forward', // Fast forward by the seek time (default 10 seconds)
                'progress', // The progress bar and scrubber for playback and buffering
                'current-time', // The current time of playback
                'duration', // The full duration of the media
                'mute', // Toggle mute
                'volume', // Volume control
                'airplay', // Airplay (currently Safari only)
            ];

            const player = Plyr.setup('#videoplayer', {controls});

            $('#loadings').fadeOut(3000);
            var inp = $("#tipue_drop_input").val();
            var img = document.createElement("img");
            img.src = "{% static 'assets/img/no-courses.svg' %}";

            if ($(".freecoursearea").children().length == 0) {
                $(".freecoursearea").append(img);
            }

            if ($(".allcoursearea").children().length == 0) {
                $(".allcoursearea").append(img);
            }

            if ($(".paidcoursearea").children().length == 0) {
                $(".paidcoursearea").append(img);
            }
        });

        $(document).ready(function () {
            {% comment %} $(".SlickCarousel ").slick({
                rtl: false, // If RTL Make it true & .slick-slide{float:right;}
                autoplay: true,
                autoplaySpeed: 5000, //  Slide Delay
                speed: 1000, // Transition Speed
                slidesToShow: 4, // Number Of Carousel
                slidesToScroll: 1, // Slide To Move
                pauseOnHover: false,
                appendArrows: $(".Head .Arrows "), // Class For Arrows Buttons
                prevArrow: '<span class="Slick-Prev "></span>',
                nextArrow: '<span class="Slick-Next "></span>',
                easing: "linear ",
                responsive: [{
                    breakpoint: 900,
                    settings: {
                        slidesToShow: 2,
                    }
                }, {
                    breakpoint: 600,
                    settings: {
                        slidesToShow: 1,
                    }
                },],
            }) {% endcomment %}
        })

        function addFav(course_id) {
            var user_id = '{{ request.user.id }}';
            var url = '/student_favourite_courses/';
            $.post(url, {student: user_id, course: course_id}, function (res) {
                // document.location.reload();
            });
        }

        // var socket = io.connect("http://localhost:3000")
        var socket = io.connect("https://booctep.com")
        var myfunc = null
        $(document).ready(function() {
            socket.on('create_discount_complete', (data) =>{
                $("div.banner").css("display", "block");
                $("#main-navbar").css("top", "40px")

                var expire_date = data.expire
                var now_date = data.now
                // initial difference between server timezone and browser timezone
                var browser_now = new Date().getTime()
                var server_now = new Date(now_date).getTime()
                var diff0 = browser_now - server_now

                var countDownDate = new Date(expire_date).getTime();
                clearInterval(myfunc)
                myfunc = setInterval(function() {
                    var now = new Date().getTime();
                    var timeleft = countDownDate - now + diff0;
                    if (timeleft <= 0) {
                        $("div.banner").css("display", "none");
                        $("#main-navbar").css("top", "0px")
                        clearInterval(myfunc);
                    }    
                    var days = Math.floor(timeleft / (1000 * 60 * 60 * 24));
                    var hours = Math.floor((timeleft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                    var minutes = Math.floor((timeleft % (1000 * 60 * 60)) / (1000 * 60));
                    var seconds = Math.floor((timeleft % (1000 * 60)) / 1000);

                    var banner_text =  data.description + " - " + hours + "hr " + minutes+ "min " + seconds + "sec " 

                    $("#banner_text").html(banner_text)
                }, 1000)
            })

            $(".banner__close").click(function() {
                $("div.banner").css("display", "none");
                $("#main-navbar").css("top", "0px")
                clearInterval(myfunc)
            })

            $.get("/discount_banner", function(res) {
                if (res.status == 1) {
                    var expire_date = res.expire_date
                    var now_date = res.now_date

                    var browser_now = new Date().getTime()
                    var server_now = new Date(now_date).getTime()
                    var diff0 = browser_now - server_now

                    var countDownDate = new Date(expire_date).getTime();
                    myfunc = setInterval(function() {
                        var now = new Date().getTime();
                        var timeleft = countDownDate - now + diff0;
                        if (timeleft <= 0) {
                            $("div.banner").css("display", "none");
                            $("#main-navbar").css("top", "0px")
                            clearInterval(myfunc);
                        } else {
                            $("div.banner").css("display", "block");
                            $("#main-navbar").css("top", "40px")
                        }   

                        var days = Math.floor(timeleft / (1000 * 60 * 60 * 24));
                        var hours = days * 24 + Math.floor((timeleft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                        var minutes = Math.floor((timeleft % (1000 * 60 * 60)) / (1000 * 60));
                        var seconds = Math.floor((timeleft % (1000 * 60)) / 1000);

                        var banner_text =  res.description + " - " + hours + "hr " + minutes+ "min " + seconds + "sec " 

                        $("#banner_text").html(banner_text)
                    }, 1000)      
                }
            })
        });

    </script>

{% endblock %}